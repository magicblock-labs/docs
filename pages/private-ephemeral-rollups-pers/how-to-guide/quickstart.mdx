---
title: "Quickstart"
description: "Enable privacy in any Solana program state account through MagicBlock's ER and Trusted Execution Environment on Intel TDX."
---

import Endpoints from "/snippets/endpoints.mdx";
import Validators from "/snippets/validators.mdx";
import Construction from "/snippets/construction.mdx";
import Software from "/snippets/software.mdx";
import SolanaResources from "/snippets/solana-resources.mdx";

import WriteProgramCode from "/snippets/per-rps-code/write-program.mdx";
import DelegateCode from "/snippets/per-rps-code/delegate.mdx";
import RestrictCode from "/snippets/per-rps-code/restrict.mdx";
import AuthorizeCode from "/snippets/per-rps-code/authorize.mdx";
import DelegationInfo from "/snippets/delegation-info.mdx";

import QuickAccessPER from "/snippets/quick-access-per.mdx";
import PerCards from "/snippets/per-cards.mdx";

---

<QuickAccessPER />

---

## Step-By-Step Guide

Build your program and upgrade it with permission and delegation hooks that utilize MagicBlock's Permission Program `ACLseoPoyC3cBqoUtkbjZ4aDrkurZW86v19pXz2XQnp1` and Delegation Program `DELeGGvXpWV2fqJUhqcF5ZSYMS4JTLjteaAMARRSaeSh`:

<Steps>
  <Step title={<a href="#1-write-program">Write your program</a>}>
    Write your Solana program as you normally.
  </Step>
  <Step
    title={
      <a href="#2-restrict">
        Add restrictions through permission hooks in your program.
      </a>
    }
  >
    Add permission hooks that create and manage access control, [see
    details](/pages/private-ephemeral-rollups-pers/how-to-guide/access-control).
  </Step>
  <Step title={<a href="#3-delegate">Add delegation hooks in your program</a>}>
    Add delegation hooks for permissions and permissioned accounts to enforce
    restrictions.
    <Validators />
  </Step>
  <Step title={<a href="#4-deploy">Deploy your program on Solana</a>}>
    Deploy your Solana program using Anchor CLI.
  </Step>
  <Step
    title={<a href="#5-authorize">Implement authorization in your client</a>}
  >
    Sign user message to retrieve authorization token from TEE endpoint.
  </Step>
  <Step title={<a href="#6-test">Execute transactions and test privacy</a>}>
    Request for authorization token and send confidential transactions.
  </Step>
</Steps>

---

## Rock-Paper-Scissor Example

<Software />
<Note>
  The latest Permission Program requires SDK version
  [>=0.8.0](https://github.com/magicblock-labs/ephemeral-rollups-sdk). See
  [migration
  guide](https://github.com/magicblock-labs/ephemeral-rollups-sdk/pull/103) for
  details.
</Note>

### Code Snippets

<Tabs>
    <Tab title="1. Write program">
        A simple rock-paper-scissor program where player can make choices and reveal the outcome:
        <WriteProgramCode />
        [⬆️ Back to Top](#code-snippets)
    </Tab>
    <Tab title="2. Restrict">
        Create and update account-level permissions with members through MagicBlock's Permission Program `ACLseoPoyC3cBqoUtkbjZ4aDrkurZW86v19pXz2XQnp1`, [see
    details](/pages/private-ephemeral-rollups-pers/how-to-guide/access-control):
        <RestrictCode />
        [⬆️ Back to Top](#code-snippets)
    </Tab>
        <Tab title="3. Delegate">
        Enforce privacy of accounts through delegation to TEE validator via MagicBlock's Delegation Program `DELeGGvXpWV2fqJUhqcF5ZSYMS4JTLjteaAMARRSaeSh`, both permission and permissioned_account must be delegated. 
        <Validators />
        <DelegateCode />

        [⬆️ Back to Top](#code-snippets)
    </Tab>
    <Tab title="4. Deploy">
        Now you’re program is upgraded and ready! Build and deploy to the desired cluster:
        ```bash
          anchor build && anchor deploy
        ```
        [⬆️ Back to Top](#code-snippets)
    </Tab>
    <Tab title="5. Authorize">
        Set up interaction with ER RPC in TEE:
        1. Verify integrity of TEE RPC via `https://pccs.phala.network/tdx/certification/v4`
        2. Request an authorization token for user to interact with TEE endpoint
        <AuthorizeCode />
        [⬆️ Back to Top](#code-snippets)
    </Tab>
    <Tab title="6. Test">
        Test your program with the Private Ephemeral Rollup connection:

        `https://tee.magicblock.app?token=${token}`

        <Validators />
        <QuickAccessPER />
        [⬆️ Back to Top](#code-snippets)
    </Tab>

</Tabs>

---

<PerCards />

---

<SolanaResources />

---

## MagicBlock Products

import ProductCards from "/snippets/product-cards.mdx";

<ProductCards />

---
