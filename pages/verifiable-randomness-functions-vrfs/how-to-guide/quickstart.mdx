---
title: "Quickstart"
description: "Learn how to request and consume verifiable randomness onchain using the MagicBlock VRF SDK on Solana."
---

import Endpoints from "/snippets/endpoints.mdx";
import Validators from "/snippets/validators.mdx";
import Software from "/snippets/software.mdx";
import ExplorerCards from "/snippets/explorer-cards.mdx";
import RpcCards from "/snippets/rpc-cards.mdx";
import ValidatorCards from "/snippets/validator-cards.mdx";
import ServerStatusCards from "/snippets/serverstatus-cards.mdx";

import InitializeCode from "/snippets/roll-dice-code/initialize.mdx";
import RequestConsumeRandomnessCode from "/snippets/roll-dice-code/request-consume-randomness.mdx";
import TestCode from "/snippets/roll-dice-code/test.mdx";

---

## Step-By-Step Guide

Any Solana program can request and consume verifiable randomness onchain within seconds using the MagicBlock VRF SDK. By the end of this guide, you'll have a working example that rolls a dice using verifiable randomness.

<Steps>
  <Step title={<a href="#1-write-program">Write your program</a>}>
    Write your Solana program as you normally.
  </Step>
  <Step
    title={
      <a href="#2-request-%26-consume-randomnness">
        Add request and consume randomness instructions.
      </a>
    }
  >
    Add CPI hooks that request and consume randomness via callback from a
    verified oracle.
  </Step>
  <Step title={<a href="#3-deploy">Deploy your program on Solana</a>}>
    Deploy your Solana program using Anchor CLI.
  </Step>
  <Step
    title={<a href="#4-test">Execute transactions for onchain randomness.</a>}
  >
    Send transactions to generate and consume randomness onchain.
  </Step>
</Steps>

---

## Roll Dice Example

<Software />

### Quick Access

Find the full basic randomness example for Anchor framework implementation:

<CardGroup cols={2}>
  <Card
    title="Roll Dice Repo"
    icon="github"
    href="https://github.com/magicblock-labs/magicblock-engine-examples/tree/main/roll-dice"
    iconType="duotone"
  >
    Repo for roll dice example
  </Card>
  <Card
    title="Roll Dice dApp"
    icon="dice"
    href="https://roll-dice.magicblock.app/"
    iconType="duotone"
  >
    Roll a dice onchain
  </Card>
</CardGroup>

### Code Snippets

<Tabs>
  <Tab title="1. Write program">
    A simple roll dice program where player initialize state account to store, request and consume randomness:
    
    <InitializeCode />

    [⬆️ Back to Top](#code-snippets)

  </Tab>
  <Tab title="2. Request & Consume Randomnness">

    1. Add `ephemeral_vrf_sdk` with Anchor features to your program

    ```bash
    cargo add ephemeral_vrf_sdk --features anchor
    ```

    Import `vrf` , `create_request_randomness_ix`, `RequestRandomnessParams`, and `SerializableAccountMeta`:

    ```rust
    use ephemeral_vrf_sdk::anchor::vrf;
    use ephemeral_vrf_sdk::instructions::{create_request_randomness_ix, RequestRandomnessParams};
    use ephemeral_vrf_sdk::types::SerializableAccountMeta;
    ```

    2. Add instructions `roll_dice` to request randomness and `callback_roll_dice` to consume randomness, along with its context:

    <RequestConsumeRandomnessCode />

    > `Request Randomness` is the process of generating a random `hashId` with the relevant callback instruction for the verified oracles to be triggered.

    > `Consume Randomness` is the process of using the verifiable randomness by your program which is provided and triggered through verified oracle.

    [⬆️ Back to Top](#code-snippets)

  </Tab>
  <Tab title="3. Deploy">
    Now you’re program is upgraded and ready! Build and deploy to the desired
    cluster:
    ```bash
    anchor build && anchor deploy
    ```
    [⬆️ Back to Top](#code-snippets)

  </Tab>
  <Tab title="4. Test">
    Ready to execute transactions for onchain randomness! 
    ```bash
    anchor test --skip-build --skip-deploy --skip-local-validator
    ```
    Run the following test:
    <TestCode />
    [⬆️ Back to Top](#code-snippets)
  </Tab>
</Tabs>

---

## Solana Explorer

Get insights about your transactions and accounts on Solana:

<ExplorerCards />

## Solana RPC Providers

Send transactions and requests through existing RPC providers:

<RpcCards />

## Solana Validator Dashboard

Find real-time updates on Solana's validator infrastructure:

<ValidatorCards />

## Server Status Subscriptions

Subscribe to Solana's and MagicBlock's server status:

<ServerStatusCards />

---
