---
title: "Quickstart"
description: "Any Solana program can be upgraded with Ephemeral Rollups by adding delegation capabilities."
---

import Endpoints from "/snippets/endpoints.mdx";
import Validators from "/snippets/validators.mdx";
import Software from "/snippets/software.mdx";
import ExplorerCards from "/snippets/explorer-cards.mdx";
import RpcCards from "/snippets/rpc-cards.mdx";
import ValidatorCards from "/snippets/validator-cards.mdx";
import ServerStatusCards from "/snippets/serverstatus-cards.mdx";

import WriteProgramCode from "/snippets/anchor-counter-code/write-program.mdx";
import DelegateCode from "/snippets/anchor-counter-code/delegate.mdx";
import TestCode from "/snippets/anchor-counter-code/test.mdx";
import DelegationInfo from "/snippets/delegation-info.mdx";

---

## Lifecycle of the Integration

The lifecycle of integrating Ephemeral Rollups in your program is as follows:

<Steps>
  <Step title={<a href="#1-write-program">Write your program</a>}>
    Write your Solana program as you normally would.
  </Step>
  <Step
    title={
      <a href="#2-delegate">
        Add delegation and undelegation hooks in your program
      </a>
    }
  >
    Add CPI hooks to delegate, commit and undelegate state accounts through
    Ephemeral Rollup sessions.
  </Step>
  <Step title={<a href="#3-deploy">Deploy your program on Solana.</a>}>
    Deploy your program directly on Solana using Anchor or Solana CLI.
  </Step>
  <Step
    title={
      <a href="#4-test">
        Ready to execute transactions for delegation and real-time speed
      </a>
    }
  >
    Send transactions without modifications on-chain and off-chain that also
    comply with the SVM RPC specification.
  </Step>
</Steps>

---

## Counter Example

<Software />

Find the full basic counter example for Rust Native and Anchor framework implementation:

<CardGroup cols={2}>
<Card
  title="Anchor"
  icon="anchor"
  href="/pages/ephemeral-rollups-ers/how-to-guide/anchor"
  iconType="duotone"
>
  Integrate with an Anchor program
</Card>
<Card
  title="Native Rust"
  icon="rust"
  href="/pages/ephemeral-rollups-ers/how-to-guide/rust"
  iconType="duotone"
>
  Integrate with an Native Rust program
</Card>

</CardGroup>

---

<Tabs>
  <Tab title="1. Write program">
    A simple counter program where value is initialized and incremented in a state account:
    <WriteProgramCode />
    [⬆️ Back to Top](#counter-example)
  </Tab>
  <Tab title="2. Delegate">
    1. Add `ephemeral-rollups-sdk` with Anchor features to your program

    ```bash
    cargo add ephemeral-rollups-sdk --features anchor
    ```

    Import `delegate`, `commit`, `ephemeral`, `DelegateConfig`, `commit_accounts` and `commit_and_undelegate_accounts`:

    ```rust
    use ephemeral_rollups_sdk::anchor::{
      commit,
      delegate,
      ephemeral
    };
    use ephemeral_rollups_sdk::cpi::DelegateConfig;
    use ephemeral_rollups_sdk::ephem::{
      commit_accounts,
      commit_and_undelegate_accounts
      };
    ```

    2.  Add `delegate` macro and instruction, `ephemeral` macro, and `undelegate` instruction to your program. Specify your preferred delegation config such as auto commits and specific ER validator:
    <DelegateCode />

    <DelegationInfo />
    <Validators />
    [⬆️ Back to Top](#counter-example)

  </Tab>

  <Tab title="3. Deploy">
    Now you’re program is upgraded and ready! Build and deploy to the desired
    cluster:

    ```bash
    anchor build && anchor deploy
    ```

    [⬆️ Back to Top](#counter-example)

  </Tab>

  <Tab title="4. Test">
    Ready to execute transactions for delegation and real-time speed.
    <Validators />

    ```bash
    anchor test --skip-build --skip-deploy --skip-local-validator
    ```
    Run the following test:
    <TestCode />

    To make it easier to integrate via the frontend, we created the [Magic Router](/pages/ephemeral-rollups-ers/introduction/magic-router). You send transactions directly to the magic router, and we can determine for you whether it should be routed to the [Ephemeral Rollup](/pages/ephemeral-rollups-ers/introduction/ephemeral-rollup) or base layer.

    <Endpoints />
    [⬆️ Back to Top](#counter-example)

  </Tab>
</Tabs>

---

## Solana Explorer

Get insights about your transactions and accounts on Solana:

<ExplorerCards />

## Solana RPC Providers

Send transactions and requests through existing RPC providers:

<RpcCards />

## Solana Validator Dashboard

Find real-time updates on Solana's validator infrastructure:

<ValidatorCards />

## Server Status Subscriptions

Subscribe to Solana's and MagicBlock's server status:

<ServerStatusCards />

---
